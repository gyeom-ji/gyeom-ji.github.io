---
title: "iOS 면접 준비 - 보안"
author: gyeomji
date: 2024-09-30 10:00:00 +0900
categories: [Interview]
tags: [Security]
pin: false
math: true
mermaid: true
---

## ✏️ 암호화와 보안의 기본 개념, 그리고 iOS 앱 보안을 위한 방안을 설명해주세요.

---

### 암호화의 기본 개념

- 암호화(Encryption)는 <span style="color:#9fb584">**데이터를 보호하기 위해 평문을 암호문으로 변환하는 과정**</span>이다.
- 암호화된 데이터는 허가받지 않은 사람이 읽지 못하도록 설계된다.
- 암호화에는 크게 두 가지 방식이 있다.

#### 1. 대칭키 암호화 (Symmetric Key Encryption)

- <span style="color:#9fb584">**암호화와 복호화에 동일한 키를 사용**</span>한다.
  - 사용자가 대칭키로 데이터를 암호화하고, 서버도 같은 대칭키로 데이터를 복호화한다.
- 빠른 성능과 효율성을 가진다.
  - 성능과 안정성은 키 길이에 의존한다.
- 속도가 빠르다.
- 주로 대량의 데이터를 빠르게 암호화해야 하는 상황에서 사용된다.
  - 파일 암호화, 디스크 암호화
- 사용자, 서버가 같은 키를 사용하므로 해커가 네트워크 구간에서 대칭키를 획득하면 쉽게 데이터를 복호화할 수 있으므로 보안에 취약하다.
- <span style="color:#9fb584">**키 관리 및 분배의 어려움**</span>이 있으며 디지털 서명이 불가능하다.
  - 암호화와 복호화에 같은 키를 사용하기 때문에, 키를 안전하게 전달하는 것이 어렵고 위험할 수 있다.
  - 만약 키가 노출되면, 데이터가 모두 노출될 수 있다.
- 종류 : `DES`, `Double DES`, `Triple DES`, `AES`

<br/>

<details>
<summary>대칭키 종류💡</summary>
<div markdown="1">

#### DES

- 가장 대중적인 대칭키 알고리즘으로 최초로 미국 표준으로 선정되었다.
- 64비트 블록 암호 알고리즘이다.
  - 56비트를 사용하고 8비트는 parity check로 사용한다.
- Avalanche(눈사태) 효과가 강하다.
  - 평문 또는 키의 조금의 변화가 암호문에 매우 큰 변화를 끼친다.
- `Double DES` : 2개의 다른 키로 2번 암호화하여 전송한다. (112비트 키 길이)
- `Triple DES` : 2개의 키를 사용해 3번 암호화하여 전송한다.
  - 현재 Triple DES에 대한 실용적인 공격 방법이 없다.

<br/>

#### AES

- DES를 대치하기 위한 128비트 대칭키 암호 시스템이다.
  - DES의 64비트 키 길이는 공격에 취약하다.
- 3중 DES 보다 효율적이고 안전성이 높다.
- 128 비트 이상의 키 길이를 가진다.

</div>
</details>

<br/>

#### 2. 비대칭키 암호화 (Asymmetric Key Encryption)

- <span style="color:#9fb584">**공개키(public key), 개인키(private key)로 암호화/복호화**</span>하는 방식이다.
  - 사용자가 공개키로 데이터를 암호화하고, 서버가 개인키로 데이터를 복호화한다.
  - 공개키 : 누구나 접근할 수 있는 키로 데이터를 암호화한다.
  - 개인키 : 소유자만 알고 있는 키로 데이터를 복호화한다.
- 사용자, 서버가 각각 다른 키를 사용해 암복호화 하므로 해커가 네트워크 중간에서 공개키를 획득해도 데이터를 복호화할 수 없으므로 보안에 안정적이다.
- 속도상의 문제로 큰 데이터의 암호화에는 사용되지 않으며 주로 디지털 서명, 전자 메일 암호화에 사용한다.
  - 디지털 서명 : 발신자는 개인 키를 사용하여 메시지에 서명한다.
- 공개키는 자유롭게 공유하고 개인키만 안전하게 보관하면 되기 때문에 <span style="color:#9fb584">**키 분배 문제를 해결**</span>한다.
- 복잡한 수학적 계산을 포함하기 때문에 성능이 떨어진다.
- 속도가 느리기 때문에 대칭 키 암호화 알고리즘과 같이 사용한다.
  - 키 교환 시 공개키 암호화 방식을 사용한다. 
    - session-key 암호화 방식이라 한다.
- 공개키의 변조 가능성이 있다. (`man-in-the-middle attack`)
  - 공개키 검증을 위해 인증서를 사용한다.
    > 중간자 공격(man-in-the-middle attack) : 장치와 웹 서버 사이에서 데이터 전송이 이뤄지는 동안 장치, 웹 서버 사이에 침입하여 데이터를 가로채는 것이다. 
- 종류 : `RSA`, `ElGamal`, `ECC`, `Diffie_Hellman`, `DSA`

<br/>

<details>
<summary>비대칭키 종류💡</summary>
<div markdown="1">

#### RSA

- 소인수 분해의 어려움에 근거한다.
- 가장 일반적인 비대칭 암호화 알고리즘으로 SSL 프로토콜과 S/MIME에 사용된다.

<br/>

#### Elgamal

- 이산 대수의 어려움에 근거한다.
- 전자 서명과 데이터 암호화에 사용한다.

<br/>

#### ECC

- 이산 대수 문제를 이용한다.
- 어떤 공개키 암호 시스템보다도 강한 암호학적 강도를 제공한다.

</div>
</details>

<br/>

#### 대칭 암호화 통신 과정

1. 사용자가 대칭키를 생성한다.
2. 대칭키로 데이터를 암호화한다.
3. 암호화된 데이터를 웹 서버로 전달한다.
4. 대칭키를 웹 서버로 복사한다.
5. 웹 서버는 대칭키로 데이터를 복호화 한다.

<br/>

#### 비대칭 암호화 통신 과정

1. 서버에서 개인키, 공개키를 생성한다.
2. 서버의 공개키를 사용자에게 복사한다.
3. 사용자는 공개키로 데이터를 암호화한다.
4. 사용자는 암호화된 데이터를 서버에 전달한다.
5. 서버는 개인키로 데이터를 복호화한다.
   
<br/>

### 보안의 기본 개념

- 보안(Security)은 <span style="color:#9fb584">**데이터와 시스템의 무결성, 기밀성, 가용성을 보호하는 것을 목표**</span>로 한다.

#### 기밀성 (Confidentiality)

- 민감한 정보가 허가된 사용자만 접근할 수 있도록 보호하는 것이다.
- 암호화는 이를 달성하는 주요 기술이다.

#### 무결성 (Integrity)

- 데이터가 허가되지 않은 수정 없이 유지되는 것을 보장한다.
- 이를 위해 해시 함수 및 디지털 서명 같은 방법이 사용된다.

#### 가용성 (Availability)

- 필요할 때 데이터나 시스템에 접근할 수 있도록 보장하는 것이다.
- 서버 장애 또는 DDoS 공격을 방지하는 것도 중요한 역할을 한다.

<br/>

### iOS 앱 보안을 위한 방안

- 애플은 보안 관련 다양한 프레임워크와 권장 사항을 제공하고 있으며 이를 적절히 사용해 앱을 보호할 수 있다.

1. Keychain 사용
    - Keychain Services는 민감한 데이터를 안전하게 저장할 수 있는 기능을 제공힌다. 
    - 패스워드, 인증 토큰, API 키 같은 정보는 Keychain에 저장하고, 암호화되어 관리된다.
2. 암호화된 데이터 저장
    - File Protection을 사용해 앱이 생성하는 파일을 암호화할 수 있다. 
    - iOS는 다양한 보호 레벨을 제공하여, 앱이 실행 중일 때나 디바이스가 잠겨 있을 때 파일에 접근할 수 없도록 설정할 수 있다.
3. 네트워크 통신 암호화 (TLS/SSL)
    - iOS 앱이 서버와 통신할 때는 반드시 TLS(Transport Layer Security) 또는 **SSL(Secure Sockets Layer)**를 사용하여 네트워크를 암호화해야 한다.
    - 이를 통해 중간에서 데이터가 탈취되는 것을 방지할 수 있다.
    - 애플의 App Transport Security (ATS) 정책에 따라, 기본적으로 모든 앱은 HTTPS 통신을 사용하도록 요구된다.
4. Touch ID / Face ID 사용
    - 사용자 인증을 강화하기 위해 Touch ID 또는 Face ID를 활용할 수 있다. 
    - iOS의 LocalAuthentication 프레임워크를 사용하여 생체 인식 정보를 앱 내에서 인증하는 데 사용할 수 있다.
5. 취약점 점검 (Security Audits)
    - 앱의 보안 취약점을 주기적으로 점검하는 것이 중요하다.
    - 타사 라이브러리를 사용하는 경우에도 그 라이브러리의 보안 취약점을 확인해야 한다.
6. 코드 난독화 및 데이터 무결성 확인
    - 앱 코드가 쉽게 분석되지 않도록 난독화(Obfuscation) 기술을 사용하고, 해커가 앱을 변조하는 것을 막기 위해 앱 실행 중에 데이터 무결성을 검사할 수 있다.
7. JWT(JSON Web Token) 사용
    - 인증 및 권한 부여에 자주 사용되는 JWT는 클라이언트와 서버 간의 안전한 인증을 가능하게 한다.
    - 토큰은 서명되어 있으며, 이를 통해 무결성을 확인할 수 있다.


<br/>

## ✏️ 대칭키 암호화와 비대칭키 암호화의 차이에 대해 설명해주세요.

---

- 대칭키와 비대칭키 암호화의 차이는 주로 사용하는 키의 종류와 보안 관리 방식에서 나타난다.
- 대칭키 암호화는 속도가 빠르고 대량의 데이터를 처리하는데 유리하지만 키 분배에 어려움이 있다.
- 비대칭키 암호화는 보안 관리 측면에서 뛰어나지만 속도가 느리고 계산 비용이 높아 주로 인증 및 소량 데이터 암호화에 사용된다.

||대칭키|비대칭키|
|:------:|:------:|:------:|
|키의 수|하나의 동일한 키|두 개의 다른 키(공개키, 개인키)|
|보안 관리|키를 안전하게 공유하는 것이 어려움|공개키는 자유롭게 배포, 개인키는 안전하게 보관|
|속도|빠름|느림|
|적용 사례|대량 데이터 암호화, 파일 암호화|SSL/TLS, 디지털 서명, 전자 메일 암호화|

<br/>

## ✏️ 해시 함수의 개념과 활용 사례에 대해 설명해주세요.
---

### 해시 함수란

- 해시 함수는 임의 크기의 데이터를 고정된 크기의 해시 값(또는 해시 코드)으로 변환하는 함수이다.
- 해시 함수는 주어진 입력값을 고정된 길이의 문자열이나 숫자로 변환하며, 일반적으로 해시 값은 16진수로 표현된다.
- 해시 함수는 데이터의 무결성을 검증하고, 비밀번호 암호화, 디지털 서명, 블록체인 등의 다양한 분야에서 중요한 역할을 한다.
- 해시 함수는 빠르고 단방향성을 가지며, 주어진 데이터가 변경되지 않았음을 보장하는 데 매우 유용하다.
- 해시 함수 알고리즘 : `MD5`, `SHA-1`, `SHA-256`, `SHA-3`

<br/>

#### 해시 함수 특징

1. 고정된 출력 : 입력 데이터의 크기와 상관없이, 항상 고정된 크기의 해시 값을 출력한다.
2. 단방향성(One-way Function) : 입력 데이터를 알고 있어도 해시 값으로부터 원래 데이터를 역으로 구할 수 없다. 이는 해시 함수가 일방향적인 성질을 가지고 있음을 의미한다.
3. 충돌 저항성(Collision Resistance) : 서로 다른 두 개의 입력이 같은 해시 값을 출력할 확률이 매우 낮아야 한다. 만약 두 개의 다른 입력이 같은 해시 값을 출력하는 경우 해시 충돌이라고 하며, 좋은 해시 함수는 이러한 충돌을 최소화힌다.
4. 민감성(Sensitivity) : 입력값에 작은 변화가 생기면, 출력값(해시 값)이 크게 달라져야 한다. 이를 Avalanche Effect라고 한다.

<br/>

### 해시 함수 활용 사례

1. 데이터 무결성 검사
    - 해시 함수는 파일이나 데이터의 무결성을 확인하는 데 사용된다.
    - 파일을 전송하거나 저장할 때, 파일의 해시 값을 생성하고 저장한다.
    - 이후 파일을 다시 해시하여 기존 해시 값과 비교함으로써, 파일이 손상되었거나 변경되지 않았는지 확인할 수 있다.
2. 암호 저장
    - 사용자의 비밀번호를 그대로 저장하는 것은 보안상 위험하다.
    - 해시 함수를 사용하여 비밀번호를 해시 값으로 변환한 후 데이터베이스에 저장하면, 나중에 사용자가 로그인할 때 입력한 비밀번호를 다시 해시하여 저장된 해시 값과 비교할 수 있다.
3. 디지털 서명 및 전자 서명
    - 해시 함수는 디지털 서명에서 중요한 역할을 한다.
    - 메시지나 문서의 해시 값을 생성한 후, 그 해시 값을 개인키로 서명한다.
    - 이렇게 서명된 해시 값은 인증서와 함께 전송되며, 수신자는 공개키로 서명을 검증하여 메시지의 무결성을 확인할 수 있다.
4. 데이터 구조(해시 테이블)
    - 해시 함수는 <span style="color:#9fb584">**해시 테이블(Hash Table)**</span>과 같은 데이터 구조에서 빠른 데이터 검색과 삽입을 가능하게 한다.
    - 해시 테이블은 키-값 쌍을 저장하며, 키를 해시 함수로 변환하여 고유한 인덱스를 생성하고 값을 빠르게 저장하거나 찾을 수 있디.
5. 블록체인
    - 블록체인 기술에서 해시 함수는 블록 간 연결을 유지하고 데이터 무결성을 보장하는 데 중요한 역할을 한다.
    - 각 블록은 이전 블록의 해시 값을 포함하고 있으며, 블록 내용이 변경되면 해당 블록과 그 이후의 모든 블록의 해시 값이 바뀌어 데이터 조작을 어렵게 만든다.
6. 파일이나 데이터의 중복 제거
    - 해시 함수는 대규모 데이터 세트에서 중복 파일을 제거할 때 유용하다.
    - 파일의 해시 값을 계산하여 동일한 해시 값을 가진 파일이 있으면 중복 파일로 간주하여 제거할 수 있다.

<br/>
<br/>

[^footnote]: The footnote source
[^fn-nth-2]: The 2nd footnote source